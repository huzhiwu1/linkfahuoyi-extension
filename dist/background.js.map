{"version":3,"file":"background.js","sources":["webpack://linkfahuoyi-exension/./src/background/index.ts","webpack://linkfahuoyi-exension/./src/config.ts","webpack://linkfahuoyi-exension/./src/types/index.ts","webpack://linkfahuoyi-exension/webpack/bootstrap","webpack://linkfahuoyi-exension/webpack/startup"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = require(\"../config\");\r\nvar types_1 = require(\"../types\");\r\n//     platform: PlatformCode,// 平台编码，淘系及其他平台订单模板的为0，拼多多订单的为1，京东订单的为2\r\nvar PlatfromsMap = new Map([\r\n    [0, /.+:\\/\\/a.*\\.fahuoyi.com\\/scanPrinting\\/index/],\r\n    [1, /.+:\\/\\/pdd.*\\.fahuoyi.com\\/scanPrinting\\/index/],\r\n    [2, /.+:\\/\\/jd.*\\.fahuoyi.com\\/scanPrinting\\/index/]\r\n]);\r\nchrome.runtime.onMessage.addListener(function (message, sender, sendResponse) {\r\n    if (message.action === types_1.StartPrint) {\r\n        console.log(\"startPrint\");\r\n        // 通知fahuoyi的content开始点击\r\n        chrome.tabs.query({\r\n            url: \"*://*.fahuoyi.com/scanPrinting/index\"\r\n        }, function (tabs) {\r\n            var exp = new RegExp(PlatfromsMap.get(message.value.platform), 'i');\r\n            tabs && tabs.forEach(function (tab) {\r\n                if (exp.test(tab.url)) {\r\n                    chrome.tabs.sendMessage(tab.id, { action: types_1.Print, value: message.value });\r\n                }\r\n            });\r\n            // console.log(tabs, 'tabs')\r\n            // // sendResponse(\"\")\r\n            // if (tabs[0]) {\r\n            //     chrome.tabs.sendMessage(tabs[0].id!, { action: Print, value: message.value })\r\n            // }\r\n        });\r\n    }\r\n    else if (message.action === \"sendNewWaybillNo\") {\r\n        // 从bg页面转发给厂家页面的content.js\r\n        chrome.tabs.query({\r\n            url: config_1.factoryContentUrls\r\n        }, function (tabs) {\r\n            tabs && tabs.forEach(function (tab) {\r\n                // chrome.tabs.sendMessage(tab.id!, message)\r\n                var port = chrome.tabs.connect(tab.id, { name: \"sendNewWaybillNo\" });\r\n                port.onMessage.addListener(function (msg, port) {\r\n                    if (msg.action === \"answer\") {\r\n                        console.log(msg, port, 'bg');\r\n                        port.disconnect();\r\n                    }\r\n                });\r\n                port.postMessage(message);\r\n            });\r\n        });\r\n        // let port = chrome.runtime.connect({ name: \"bgSendMessage\" })\r\n        // port.postMessage(message)\r\n    }\r\n});\r\n// chrome.runtime.onConnect.addListener(function (msg) {\r\n//     console.log(msg, 'msgbg')\r\n// })\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.factoryContentUrls = void 0;\r\nexports.factoryContentUrls = [\"http://localhost:8080/*\", \"*://diy.quyinmao.com/*\"];\r\n","\"use strict\";\r\n// //  快递模板列表下载是否完成\r\n// export const WaybillTemplateComplete = \"waybillTemplateComplete\"\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Print = exports.StartPrint = void 0;\r\n// // 让popup获取waybillTemplate\r\n// export const GetWaybillTemplate = \"getWaybillTemplate\"\r\nexports.StartPrint = \"StartPrint\";\r\nexports.Print = \"Print\";\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module\n__webpack_require__(\"./src/background/index.ts\");\n// This entry module used 'exports' so it can't be inlined\n"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;;A","sourceRoot":""}